<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LyricEar ‚Äî –ü–ª–µ–µ—Ä</title>
  <link rel="stylesheet" href="assets/styles.css?v=5" />
</head>
<body>
  <div id="toast" class="toast"></div>

  <!-- Logo SVG ‚Äî –¥–ª—è index.html –∏ player.html -->
<div id="logoBar" class="logo-bar">
  <a href="index.html" class="logo-link">
    <svg class="logo-svg" width="40" height="40" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="100" cy="100" r="96" stroke="url(#hRim)" stroke-width="3" fill="#0e0b1a"/>
      <ellipse cx="100" cy="174" rx="42" ry="4" fill="#7c3aed" fill-opacity=".18"/>
      <path d="M60 140 Q72 60,100 44 Q128 60,140 140" stroke="url(#hAu1)" stroke-width="4" fill="none" stroke-linecap="round"/>
      <path d="M68 142 Q78 75,100 56 Q122 75,132 142" stroke="url(#hAu2)" stroke-width="2.5" fill="none" opacity=".55" stroke-linecap="round"/>
      <path d="M76 144 Q84 90,100 68 Q116 90,124 144" stroke="url(#hAu3)" stroke-width="1.5" fill="none" opacity=".35" stroke-linecap="round"/>
      <circle cx="100" cy="42" r="5" fill="#f0abfc" opacity=".9"/>
      <circle cx="100" cy="42" r="9" fill="none" stroke="#f0abfc" stroke-width="1" opacity=".3"/>
      <path d="M56 158 Q64 150,72 158 T88 158 T104 158 T120 158 T136 158 T152 158" stroke="#22d3ee" stroke-width="2" fill="none" opacity=".5" stroke-linecap="round"/>
      <path d="M60 166 Q70 160,80 166 T100 166 T120 166 T140 166" stroke="#34d399" stroke-width="1.5" fill="none" opacity=".35" stroke-linecap="round"/>
      <defs>
        <linearGradient id="hRim" x1="0" y1="0" x2="200" y2="200">
          <stop offset="0%" stop-color="#7c3aed" stop-opacity=".6"/>
          <stop offset="50%" stop-color="#22d3ee" stop-opacity=".4"/>
          <stop offset="100%" stop-color="#34d399" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="hAu1" x1="60" y1="140" x2="140" y2="44">
          <stop offset="0%" stop-color="#7c3aed"/>
          <stop offset="50%" stop-color="#a855f7"/>
          <stop offset="100%" stop-color="#22d3ee"/>
        </linearGradient>
        <linearGradient id="hAu2" x1="68" y1="142" x2="132" y2="56">
          <stop offset="0%" stop-color="#22d3ee"/>
          <stop offset="100%" stop-color="#34d399"/>
        </linearGradient>
        <linearGradient id="hAu3" x1="76" y1="144" x2="124" y2="68">
          <stop offset="0%" stop-color="#34d399"/>
          <stop offset="100%" stop-color="#f0abfc"/>
        </linearGradient>
        <linearGradient id="hText" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#a855f7"/>
          <stop offset="100%" stop-color="#22d3ee"/>
        </linearGradient>
      </defs>
    </svg>
    <span class="logo-text">
      <span class="logo-name">LyricEar</span>
      <span class="logo-sub">—É—á–∏–º —è–∑—ã–∫–∏ –Ω–∞ —Å–ª—É—Ö</span>
    </span>
  </a>
</div>
  <!-- ‚ïê‚ïê‚ïê Header ‚ïê‚ïê‚ïê -->
  <header class="song-header">
    <h1 id="songTitle"></h1>
    <p id="songArtist"></p>
    <p><span id="songLang" class="pill"></span></p>
    <p id="songHint" class="hint"></p>
  </header>

  <!-- ‚ïê‚ïê‚ïê Sticky block: player + spectrogram ‚ïê‚ïê‚ïê -->
  <div id="stickyBlock" class="sticky-block">

    <!-- Player -->
    <section class="panel player-panel">
      <div class="player-compact">
        <!-- Video (left, smaller) -->
        <div id="videoWrap" class="video-wrap is-audio">
          <video id="player" playsinline preload="auto"></video>
          <button id="btnPlayOverlay" class="play-overlay" aria-label="Play/Pause">‚ñ∂</button>
        </div>
        <!-- Controls (right) -->
        <div class="player-side">
          <div class="media-bar">
            <span class="lamp lamp-off" id="mediaLamp"></span>
            <span class="mini mono" id="tNow">0.00s</span>
          </div>
          <div class="media-btns">
            <button class="ghost compact-btn pulse" id="btnLoadLocal">üìÅ –§–∞–π–ª</button>
            <input type="file" id="mediaPick" accept="audio/*,video/*" hidden>
            <button class="primary compact-btn" id="btnLoadYaDisk">‚òÅ –Ø.–î–∏—Å–∫</button>
            <button class="bad compact-btn" id="btnForgetMedia" style="display:none">üóë</button>
          </div>
          <span class="mini mono muted" id="mediaName"></span>
        </div>
      </div>
      <!-- Progress bar -->
      <div class="play-row">
        <button id="btnPlay" class="play-btn-mini">‚ñ∂</button>
        <input type="range" id="playProgress" min="0" max="1000" value="0">
        <span id="playTime" class="mini mono">0:00/0:00</span>
      </div>
    </section>

    <!-- Spectrogram -->
    <section class="panel spec-panel">
      <div class="spec-toolbar">
        <button class="ghost compact-btn" id="spectrogramToggle">üìä –°–ø–µ–∫—Ç—Ä–æ–≥—Ä–∞–º–º–∞ ‚ñæ</button>
        <button class="ghost spec-zoom-btn" id="specZoomOut">‚àí</button>
        <span class="mini mono" id="specZoomLabel">√ó1</span>
        <button class="ghost spec-zoom-btn" id="specZoomIn">+</button>
      </div>
      <div id="spectrogramWrap" class="spec-wrap">
        <canvas id="spectrogramCanvas"></canvas>
      </div>
    </section>

  </div>

  <!-- ‚ïê‚ïê‚ïê Segment controls ‚ïê‚ïê‚ïê -->
  <section class="panel seg-panel">
    <div class="seg-row">
      <div id="segStatus" class="seg-status"></div>
      <button class="primary compact-btn" id="btnPlaySeg" disabled>‚ñ∂ –§—Ä–∞–≥–º</button>
      <button class="ghost compact-btn" id="btnStart" disabled>‚è±S</button>
      <button class="ghost compact-btn" id="btnEnd" disabled>‚è±E</button>
      <button class="bad compact-btn" id="btnClear" disabled>‚úï</button>
    </div>
    <div class="toggle-row">
      <label><input type="checkbox" id="loopToggle"> üîÅ</label>
      <label><input type="checkbox" id="autoNextToggle"> ‚è≠</label>
      <label><input type="checkbox" id="globalShowOrig"> üîç</label>
      <label><input type="checkbox" id="globalShowPhon"> üëÇ</label>
      <label><input type="checkbox" id="globalShowTrans"> üí¨</label>
      <label><input type="checkbox" id="globalShowWhy"> üß†</label>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê Lines ‚ïê‚ïê‚ïê -->
  <section id="lines" class="lines"></section>

  <!-- ‚ïê‚ïê‚ïê Footer ‚ïê‚ïê‚ïê -->
  <footer class="page-footer">
    <div class="save-indicator" id="saveIndicator">üíæ</div>
    <button class="bad tiny" id="btnResetProgress">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
    <p class="mini muted" style="margin-top:12px;">
      <a href="index.html">‚Üê –ö–∞—Ç–∞–ª–æ–≥</a>
    </p>
  </footer>

  <script src="assets/app.js?v=5"></script>
</body>
</html>
