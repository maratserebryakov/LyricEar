<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LyricEar — Плеер</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div id="toast" class="toast"></div>

  <!-- ═══ Header ═══ -->
  <header class="song-header">
    <h1 id="songTitle"></h1>
    <p id="songArtist"></p>
    <p><span id="songLang" class="pill"></span></p>
    <p id="songHint" class="hint"></p>
  </header>

  <!-- ═══ Sticky block: player + spectrogram ═══ -->
  <div id="stickyBlock" class="sticky-block">

    <!-- Player -->
    <section class="panel player-panel">
      <div class="media-bar">
        <span class="mini">MEDIA</span>
        <span class="lamp lamp-off" id="mediaLamp"></span>
        <span class="mini mono" id="tNow">0.00s</span>
      </div>

      <div id="videoWrap" class="video-wrap is-audio">
        <video id="player" playsinline preload="auto"></video>
      </div>

      <div class="play-row">
        <button id="btnPlay">▶</button>
        <input type="range" id="playProgress" min="0" max="1000" value="0">
        <span id="playTime">0:00 / 0:00</span>
      </div>

      <div class="media-row">
        <button class="ghost pulse" id="btnLoadLocal">📁 Выбрать файл</button>
        <input type="file" id="mediaPick" accept="audio/*,video/*" hidden>
        <button class="primary" id="btnLoadYaDisk">☁ Яндекс.Диск</button>
        <button class="bad tiny" id="btnForgetMedia" style="display:none">🗑 Забыть</button>
        <span class="mini mono" id="mediaName"></span>
      </div>
    </section>

    <!-- Spectrogram -->
    <section class="panel spec-panel">
      <div class="spec-toolbar">
        <button class="ghost" id="spectrogramToggle">📊 Спектрограмма ▾</button>
        <button class="ghost spec-zoom-btn" id="specZoomOut">−</button>
        <span class="mini mono" id="specZoomLabel">×1</span>
        <button class="ghost spec-zoom-btn" id="specZoomIn">+</button>
      </div>
      <div id="spectrogramWrap" class="spec-wrap">
        <canvas id="spectrogramCanvas"></canvas>
      </div>
    </section>

  </div>

  <!-- ═══ Segment controls ═══ -->
  <section class="panel">
    <div id="segStatus" class="seg-status"></div>

    <div class="seg-buttons">
      <button class="primary" id="btnPlaySeg" disabled>▶ Фрагмент</button>
      <button class="ghost" id="btnStart" disabled>⏱ Start</button>
      <button class="ghost" id="btnEnd" disabled>⏱ End</button>
    </div>
    <div class="seg-buttons" style="margin-top:6px;">
      <button class="bad" id="btnClear" disabled>✕ Сброс</button>
    </div>

    <div class="toggle-row">
      <label><input type="checkbox" id="loopToggle" /> 🔁 Зациклить</label>
      <label><input type="checkbox" id="autoNextToggle" /> ⏭ Авто</label>
    </div>

    <div class="toggle-row">
      <label><input type="checkbox" id="globalShowOrig" /> 🔍 Оригинал</label>
      <label><input type="checkbox" id="globalShowPhon" /> 👂 Автор</label>
    </div>
    <div class="toggle-row">
      <label><input type="checkbox" id="globalShowTrans" /> 💬 Переводы</label>
      <label><input type="checkbox" id="globalShowWhy" /> 🧠 Почему</label>
    </div>
  </section>

  <!-- ═══ Lines ═══ -->
  <section id="lines" class="lines"></section>

  <!-- ═══ Footer ═══ -->
  <footer class="page-footer">
    <div class="save-indicator" id="saveIndicator">💾</div>
    <button class="bad tiny" id="btnResetProgress">Сбросить прогресс</button>
    <p class="mini muted" style="margin-top:12px;">
      <a href="index.html">← Каталог</a>
    </p>
  </footer>

  <script src="assets/app.js?v=4"></script>
</body>
</html>
